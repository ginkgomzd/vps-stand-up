#!/usr/bin/env bash

# refresh_repo url [ dir ]
# Clones repo from 'url' (into 'dir' if provided) or does a "git pull"
refresh_repo () {
  URL="$1"
  [ ! "$1" ] && { echo "usage: refresh_repo url [ dir ]"; echo "Error: No URL provided"; exit 1; }
  if [ "$2" ]; then
    D="$2"
  else
    D=$( basename -s .git "$1" )
  fi
  if [ ! -d $D ]; then
    git clone "$URL" "$D"
  else
    pushd "$D" > /dev/null
    git pull
    popd > /dev/null
  fi
}


# Get standard tools
[ ! -d ./tools ] && mkdir ./tools
cd ./tools
refresh_repo https://ginkgo-obriend@bitbucket.org/ginkgo-obriend/linode-etc.git
refresh_repo https://github.com/axon-obriend/backup-mysql.git
refresh_repo https://gist.github.com/axon-obriend/4eff8ef4b815459d0da03dcdf362e7c8 gslperms
refresh_repo https://ginkgo-obriend@bitbucket.org/ginkgostreet/env-utils-v3.git
refresh_repo https://github.com/ginkgostreet/bad-bot-blocker.git
wget https://sourceforge.net/projects/rkhunter/files/rkhunter/1.4.6/rkhunter-1.4.6.tar.gz && tar xvf rkhunter-1.4.6.tar.gz
cd ..
